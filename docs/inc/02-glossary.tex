\section*{Введение}
По данным <<Анализа рынка гостиничных услуг в России>>, подготовленного агенством BusinesStat, занимающимся исследованием рынка Российской Федерации и всех стран бывшего СНГ, подобным сервисом в 2022 году воспользовались 62.4 млн чел, что на 63\% превысило значение 2020 года (38.3 млн человек). Такой рост объясняется сокращением выездного туризма и развитием внутреннего на фоне геополитической обстановки. Также численность гостиничных учреждений к концу 2022 года достигла 22.01 тыс., в то время как в 2020 она составляла 20.41 тыс. 

Ввиду сильной конкуренции для привлечения клиентов каждая компания стремится улучшить свой сервис, особое внимание уделяется системам бронирования.

Данное техническое задание определяет требования к разработке распределённой системы бронирования номеров гостиниц сети Apartlux. В неё входят 14 гостиниц в Москве на таких станциях метро, как Бабушкинская, Рижская, Тверская, Авиамоторная и другие.

\section*{Глоссарий}
\begin{enumerate}
	\item Узел системы -- региональный сервер, содержащий данные авторов и читателей указанного региона.
	
	\item <<Горячее>> переконфигурирование системы - способность системы применять изменения без перезапуска и перекомпиляции.
	
	\item Медиана времени отклика - среднее время предоставления данных пользователю.
	
	\item Валидация - проверка данных на соответствие заданным условиям и ограничениям.
	
	\item REST (Representational State Transfer) -- архитектурный стиль взаимодействия компонентов распределённого приложения в сети. 
	
	\item ПО -- программное обеспечение.
\end{enumerate}

\section*{Основания для разработки}
Разработка ведётся в рамках выполнения лабораторных работ по курсу <<Методология программной инженерии>> на кафедре <<Программное обеспечение ЭВМ и информационные технологии>> факультета <<Информатика и системы управления>> МГТУ им. Н.Э. Баумана.

\section*{Назначение разработки}
Разрабатываемая система должна предоставлять пользователям возможность поиска и бронирования на интересующие даты. Необходимо реализовать поддержку отмены заказа. Также должна быть предусмотрена опция просмотра полной информации по всем гостиницам, входящих в сеть. В зависимости от количества сделанных ранее заказов система лояльности даёт скидку на новые. Система должна обеспечивать пользователю, как клиенту, возможность просмотра информации как по конкретному, так и по всем бронированиям, статусе в программе лояльности, а как администратору -- доступ ко всей информации с возможностью просмотра, внесения и изменения данных.

\section*{Существующие аналоги}
У сети Apartlux уже есть действующий с 2011 года сайт для бронирования, который имеет ряд недостатков. При его создании разработчики придерживались подходам монолитной архитектуры, поэтому сейчас компания столкнулась с такими трудностями, как:
\begin{enumerate}
	\item проблематичность масштабирования;
	
	\item сложность внедрения появившихся технологий, которые используются повсеместно;
	
	\item внесение даже незначительного изменения в функциональность существенно усложняет и замедляет разработку.
\end{enumerate}

В то время как на российском рынке гостиничных услуг появляется всё больше компаний, например, Radisson, Azimut Hotels, Hilton, остановивших свой выбор на микросервисной архитектуре и внедряющих современные технологии: PostgreSQL, MongoDB, Kafka, ELK stack и т.д. У приведённых сетей отелей и гостиниц есть общий недостаток: непрозрачная программа лояльности, которая направлена лишь на ограниченный круг лиц.

По сравнению с существующим сайтом и указанными аналогами разрабатываемый проект должен иметь следующие преимущества:
\begin{enumerate}
	\item в основе должна лежать микросервисная архитектура, решающая сложности с масштабированием, обслуживанием и внесением изменений в функциональность;
	
	\item понятная бонусная программа, ориентированная на каждого из клиентов.
\end{enumerate}

\section*{Описание системы}
Разрабатываемый сервис должен представлять собой распределённую систему для бронирования номеров гостиниц сети Apartlux. Если клиент хочет оформить бронь, ему необходимо зарегистрироваться, указ информацию: фамилия, имя, отчество, дата рождения, номер телефона. В случае, если зарегистрированному ранее пользователю нужно отменить заказ, получить информацию о его бронированиях или статусе в программе лояльности, ему нужно авторизоваться. Для неавторизованных пользователей доступен только просмотр общей информации. 
На рисунке \ref{fig:schema} отображена схема предметной области.
\begin{figure}[h]
	\begin{center}
		{\includegraphics[scale = 0.6]{img/pic/general.pdf}}
		\caption{Схема предметной области.}
		\label{fig:schema}
	\end{center}
\end{figure}

\pagebreak

\section*{Общие требования к системе}
Требования к системе следующие.
\begin{enumerate}
	\item Разрабатываемое ПО должно поддерживать функционирование системы в режиме 24 часов, 7 дней в неделю, 365 дней в году (24/7/365) со среднегодовым временем доступности не менее 99.9\%. Допустимое время, в течении которого система недоступна, за год должна составлять $24\cdot365\cdot0.001=8.76$ ч.
	
	\item Время восстановления системы после сбоя не должно превышать 15 минут.
	
	\item Каждый узел должен автоматически восстанавливаться после сбоя.
	
	\item Система должна поддерживать возможность <<горячего>> переконфигурирования системы. Необходимо предусмотреть поддержку добавления нового узла во время работы системы без рестарта.
	
	\item Обеспечить безопасность работоспособности за счёт отказоустойчивости узлов.
\end{enumerate}

\section*{Требования к функциональным характеристикам}
\begin{enumerate}
	\item По результатам работы модуля сбора статистики медиана времени отклика системы на запросы пользователя на получение информации не должна превышать 3 секунд.
	
	\item По результатам работы модуля сбора статистики медиана времени отклика системы на запросы, добавляющие или изменяющие информацию на портале не должна превышать 7 секунд.
	
	\item Медиана времени отклика системы на действия пользователя должна быть менее 0.8 секунд при условии работы на рекомендованной аппаратной конфигурации, задержках между взаимодействующими сервисами менее 0.2 секунды и одновременном числе работающих пользователей менее 100 на каждый сервер, обслуживающий внешний интерфейс.
	
	\item Система должна обеспечивать возможность запуска в современных браузерах: не менее 85\% пользователей Интернета должны пользоваться ей без какой-либо деградации функционала.
\end{enumerate}

\section*{Функциональные требования к системе с точки зрения пользователя}
Система должна обеспечивать реализацию следующих функций.
\begin{enumerate}
	\item Регистрация и авторизация пользователей с валидацией вводимых данных как через интерфейс приложения, так и через	социальные сети.
	
	\item Аутентификация пользователей.
	
	\item Разделение всех пользователей на три роли:
	\begin{itemize}
		\item Неавторизированный пользователь;
		
		\item Авторизированный пользователь;
		
		\item Администратор.
	\end{itemize}
	
	\item Предоставление возможностей \textbf{Неавторизированному пользователю, Авторизированному пользователю, Администратору} представленных в таблице \ref{tbl:func}.
\end{enumerate}

\begin{longtable}{|p{4.9cm}|p{5.4cm}|p{5.4cm}|}
	\caption{Функции пользователей}
	\label{tbl:func} \\
	\hline
	
	\textbf{Неавторизированный пользователь} & \textbf{Авторизированный пользователь} & \textbf{Администратор} \\
	\hline
	\endfirsthead
	
	\hline
	\textbf{Неавторизированный пользователь} & \textbf{Авторизированный пользователь} & \textbf{Администратор} \\
	\hline
	\endhead
	
	\hline
	\multicolumn{3}{c}{\textit{Продолжение на следующей странице}}
	\endfoot
	\hline
	\endlastfoot
	
	\multicolumn{3}{|l|}{1. просмотр списка всех гостиниц; } \\
	\multicolumn{3}{|l|}{2. просмотр доступных дат для бронирования; } \\
	\multicolumn{3}{|l|}{3. получение информации об условиях программы лояльности; } \\
	\hline
	
	\multirow{6}{*}{}
	&
	4. получение и изменение информации текущего аккаунта;
	&
	4. получение и редактирование информации о любом клиенте, зарегистрированном в системе; \\
	
	&
	5. просмотр всех бронирований, зарегистрированных на имя текущего клиента; 
	&
	5. просмотр и редактирование всех оформленных бронирований; \\
	
	&
	6. получение детальной информации по конкретному бронированию текущего клиента; 
	&
	6. получение детальной информации по конкретному бронированию; \\
	
	&
	7. бронирование отеля на имя текущего клиента;
	&
	7. бронирование отеля на зарегистрированного в системе пользователя; \\
	
	&
	8. отмена заказа, оформленного на имя текущего пользователя;
	&
	8. отмена любого оформленного заказа; \\
	
	& 
	9. получение информации о статусе текущего пользователя в программе лояльности.
	&
	9. получение информации о статусе в программе лояльности любого зарегистрированного в системе клиента. \\
	\cline{2-3}
	
	&
	&
	10. изменение доступных дат для бронирования; \\
	
	&
	&
	11. редактирование информации об условиях программы лояльности. \\
	\hline
\end{longtable}

\section*{Входные данные}
Входные параметры системы зависят от функции, полный перечень представлен в таблице \ref{tbl:input}.
\begin{longtable}{|p{7cm}|p{9cm}|}
	\caption{Входные данные}
	\label{tbl:input} \\
	\hline
	
	\textbf{Функциональные возможности} & \textbf{Входные данные} \\
	\hline
	\endfirsthead
	
	\hline
	\textbf{Функциональные возможности} & \textbf{Входные данные} \\
	\hline
	\endhead
	
	\hline
	\multicolumn{2}{c}{\textit{Продолжение на следующей странице}}
	\endfoot
	\hline
	\endlastfoot
	
	\hline
	\hline
	\multicolumn{2}{|c|}{Авторизированный пользователь} \\
	\hline
	\hline
	
	регистрация
	&
	1. фамилия, имя и отчество не более 256 символов; \newline
	2. дата рождения; \newline
	3. логин; \newline
	4. пароль; \\
	\hline
	
	авторизация
	&
	1. логин; \newline
	2. пароль; \\
	\hline
	
	просмотр и изменение личной информации
	& 
	\multirow{3}{*}{1. логин;} \\
	\cline{1-1}
	
	просмотр всех бронирований, зарегистрированных на имя текущего пользователя
	&
	\\
	\cline{1-1}
	
	получение информации о статусе текущего пользователя в программе лояльности
	&
	\\
	\hline
	
	получение данных по конкретному бронированию текущего клиента
	&
	\multirow{2}{*}{\shortstack[l]{
	1. логин; \\
	2. идентификатор заказа;}} \\
	\cline{1-1}
	
	отмена бронирования
	&
	\\
	\hline
	
	бронирование гостиницы на имя текущего клиента
	&
	1. логин; \newline
	2. дата начала и окончания бронирования; \newline
	3. название выбранной гостиницы; \\
	\hline
	\hline
	\multicolumn{2}{|c|}{Администратор} \\
	\hline
	\hline
	
	авторизация
	&
	1. логин; \newline
	2. пароль; \\
	\hline
	
	изменение доступных дат для бронирования
	&
	1. логин; \newline
	2. идентификатор гостиницы; \newline
	3. изменяемая и новая даты; \\
	\hline
	
	изменение личной информации клиентов
	&
	1. логин администратора;  \newline
	2. логин клиента;  \newline
	3. обновляемые данные:
	\begin{itemize}
		\item фамилия;
		\item имя;
		\item отчество;
		\item дата рождения;
		\item логин;
	\end{itemize} \\
	\hline
	
	просмотр всех бронирований
	&
	1. логин; \\
	\hline
	
	редактирование существующего бронирования
	&
	1. логин; \newline
	2. идентификатор заказа; \newline
	3. обновляемые данные:
	\begin{itemize}
		\item дата начала/окончания бронирования;
		\item идентификатор гостиницы;
		\item логин клиента, на который оформлен заказ;
	\end{itemize} \\
	\hline
	
	получения детальной информации по конкретному бронированию
	&
	\multirow{2}{*}{\shortstack[l]{
	1. логин; \\
	2. идентификатор заказа;}} \\
	\cline{1-1}
	
	отмена бронирования
	&
	\\
	\hline
	
	бронирование отеля на зарегистрированного клиента
	&
	1. логин администратора; \newline
	2. логин клиента; \newline
	3. дата начала и окончания бронирования; \newline
	4. название выбранной гостиницы;\\
	\hline
	
	получение данных о статусе пользователя в программе лояльности
	&
	1. логин администратора; \newline
	2. логин пользователя. \\
	\hline

\end{longtable}
 
 
\section*{Выходные параметры}
Выходными параметрами системы являются web-страницы. В зависимости от запроса и текущей роли пользователя  они содержат следующую информацию (таблица \ref{tbl:output}).
\begin{longtable}{| p{5.3cm} | p{5.3cm} | p{5.3cm} |}
	\caption{Выходные параметры}
	\label{tbl:output} \\
	\hline
	
	\textbf{Неавторизированный пользователь} & \textbf{Авторизированный пользователь} & \textbf{Администратор} \\
	\hline
	\endfirsthead
	
	\hline
	\textbf{Неавторизированный пользователь} & \textbf{Авторизированный пользователь} & \textbf{Администратор} \\
	\hline
	\endhead
	
	\hline
	\multicolumn{3}{c}{\textit{Продолжение на следующей странице}}
	\endfoot
	\hline
	\endlastfoot
	
	\multicolumn{3}{|l|}{1. список гостиниц, которые входят в сеть Apartlux } \\
	\multicolumn{3}{|l|}{2. список доступных для бронирования дат по конкретной гостинице; } \\
	\multicolumn{3}{|l|}{3. информация об условиях текущей программы лояльности; } \\
	\hline
	
	\multirow{6}{*}{} & \multicolumn{2}{p{10.6cm} |}{4. детальная информация о пользователе, вошедшем в систему;} \\
	%\cline{2-3}
	
	& \multicolumn{2}{p{10.6cm} |}{5. список доступных бронирований;} \\
	%\cline{2-3}
	
	& \multicolumn{2}{p{10.6cm} |}{6. детальная информация о доступном конкретном бронировании;} \\
	%\cline{2-3}
	
	& \multicolumn{2}{p{10.6cm} |}{7. форма для регистрации бронирования;} \\
	\cline{2-3}
	
	& \multirow{2}{*}{} & 8. список зарегистрированных в системе клиентов; \\
	%\cline{3-3}

	& & 9. список оформленных заказов; \\
	\hline
\end{longtable}

\section*{Топология Системы}
На рисунке \ref{fig:topology} изображён один из возможных вариантов  топологии разрабатываемой распределенной Системы.
\begin{figure}[h]
	\begin{center}
		{\includegraphics[scale = 0.6]{img/pic/topology.pdf}}
		\caption{Топология системы.}
		\label{fig:topology}
	\end{center}
\end{figure}

\pagebreak
%
Система будет состоять из фронтенда и 5 подсистем:
\begin{itemize}
	\item сервис-координатор;
	
	\item сервис регистрации и авторизации;
	
	\item сервис бронирования;
	
	\item сервис оплаты;
	
	\item сервис лояльности.
\end{itemize}

\textbf{Фротенд} принимает запросы от пользователей по протоколу HTTP и анализирует их. На основе проведенного анализа выполняет запросы к микросервисам бекенда, агрегирует ответы и отсылает их пользователю.

\textbf{Сервис-координатор} -- единая точка входа и межсервисной коммуникации.

\textbf{Сервис-регистрации и авторизации} отвечает за:
\begin{itemize}
	\item возможность регистрации нового клиента;
	
	\item аутентификацию пользователя (клиента и администратора);
	
	\item авторизацию пользователя;
	
	\item выход из сессии.
\end{itemize}

\textbf{Сервис бронирования} реализует следующие функции:
\begin{itemize}
	\item получение списка всех гостиниц, входящий в сеть Apartlux;
	
	\item получение информации о конкретной гостинице;
	
	\item получение, создание, отзыв бронирования.
\end{itemize}

\textbf{Сервис оплаты} реализует функции:
\begin{itemize}
	\item проведение платежа от клиента к системе;
	
	\item получение статуса оплаты;
	
	\item отмену платежа.
\end{itemize}

\textbf{Сервис лояльности} отвечает за ведение статистики по количеству бронирований всех клиентов, на основе которой для каждого пользователя в индивидуальном порядке предоставляется скидка на будущие заказы.

\section*{Требования к программной реализации}
\begin{enumerate}
	\item Требуется использовать СОА (сервис-ориентированную архитектуру) для реализации системы.
	
	\item Система состоит из микросервисов. Каждый микросервис отвечает за свою область логики работы приложения и должны быть запущены изолированно друг от друга.
	
	\item При необходимости, каждый сервис имеет своё собственное хранилище,  запросы между базами запрещены.
	
	\item Необходимо  реализовать  один  web-интерфейс  для  фронтенда.  Интерфейс  должен  быть  доступен  через  тонкий  клиент (браузер).
	
	\item Для межсервисного взаимодействия использовать HTTP (придерживаться RESTful).
	
	\item Выделить Gateway Service как единую точку входа и межсервисной коммуникации. В системе не должно осуществляться горизонтальных запросов.
	
	\item При недоступности систем портала должна осуществляться деградация	функционала или выдача пользователю сообщения об ошибке.
	
	\item Необходимо предусмотреть авторизацию пользователей, как через интерфейс приложения, так и через популярные социальные сети.
	
	\item Валидацию входных данных необходимо проводить и на стороне  пользователя,  и  на  стороне  фронтенда. Микросервисы бекенда не должны валидировать входные данные, поскольку пользователь не может к ним обращаться напрямую, они должны получать уже отфильтрованные входные данные.
	
	\item Для запросов, выполняющих обновление данных на нескольких узлах распределенной системы, в случае недоступности одной из систем, необходимо выполнять полный откат транзакции.
	
	\item Приложение должно поддерживать возможность горизонтального и вертикального масштабирования за счет увеличения количества функционирующих узлов и совершенствования технологий реализации компонентов и всей
	архитектуры системы.
	
	\item Код хранить на Github, для сборки использовать Github Actions.
	
	\item Gateway Service должен запускаться на порту 8080, остальные сервисы запускать на портах 8050, 8060, 8070.
	
	\item Каждый сервис должен быть завернут в docker.
\end{enumerate}

\section*{Функциональные требования к подсистемам}
Подсистемы: фронтенд, бекенд-координатор, бекенд регистрации и авторизации, бекенд бронирования, бекенд оплаты, бекенд лояльности.

\textbf{Фронтенд} -- серверное  приложение, предоставляет пользовательский интерфейс и внешний API системы, при  разработке которого нужно учитывать следующее:
\begin{itemize}
	\item должен  принимать  запросы  по  протоколу  HTTP и формировать ответы пользователям в формате HTML;
	
	\item в зависимости от типа запроса должен отправлять последовательные запросы в соответствующие микросервисы;
	
	\item запросы к микросервисам необходимо осуществлять по протоколу HTTP;
	
	\item данные необходимо передавать в формате JSON.
\end{itemize}

\textbf{Сервис-координатор} -- серверное приложение, через которое проходит весь поток запросов и ответов, должен соответствовать следующим требованиям разработки:
\begin{itemize}
	\item принимать и возвращать данные в формате JSON по протоколу HTTP;
	
	\item накапливать статистику запросов, в случае, если система не ответила N раз, то в N + 1 раз вместо запроса сразу отдавать fallback. Через некоторое время выполнить запрос к реальной системе, чтобы проверить её состояние;
	
	\item выполнять проверку существования клиента, также регистрацию и аутентификацию пользователей;
	
	\item получение списка всех гостиниц с возможными датами для бронирования и внесение изменений в перечень доступных дат (последнее только для администраторов);
	
	\item получение информации и обновление данных о зарегистрированном пользователе;
	
	\item оформление и отзыв созданного ранее бронирования;
		
	\item получение данных о бронированиях пользователя;
	
	\item получение статуса конкретного пользователя в программе лояльности и обновление её условий (последнее только для администраторов).
\end{itemize}

\textbf{Сервис-регистрации и авторизации} должен реализовывать следующие функциональные возможности:
\begin{itemize}
	\item принимать и возвращать данные в формате JSON по протоколу HTTP;
	
	\item возможность регистрации нового клиента и обновление данных уже существующего;
	
	\item обеспечение авторизации пользователя через аккаунт как в системе, так и через предлагаемые социальные сети.
\end{itemize}
%
Хранимая в базе данных сущность, ассоциированная с сервисом, детально представлена в таблице \ref{tbl:db_auth}.
\begin{longtable}{| p{4cm} | p{8.3cm} | p{3.6cm} |}
	\caption{Состав сущностей}
	\label{tbl:db_auth} \\
	\hline
	
	\textbf{Сущность} & \textbf{Поля} & \textbf{Обязательность} \\
	\hline
	\endfirsthead
	
	\hline
	\textbf{Сущность} & \textbf{Поля} & \textbf{Обязательность} \\
	\hline
	\endhead
	
	\hline
	\multicolumn{3}{c}{\textit{Продолжение на следующей странице}}
	\endfoot
	\hline
	\endlastfoot
	
	\multirow{5}{*}{Аккаунт}
	& 
	\textit{фамилия}, не более 256 символов
	& 
	да \\
	\cline{2-3}
	
	& 
	\textit{имя}, не более 256 символов
	& 
	да \\
	\cline{2-3}
	
	& 
	\textit{отчество}, не более 256 символов
	& 
	нет \\
	\cline{2-3}
	
	& 
	\textit{дата рождения}
	& 
	да \\
	\cline{2-3}
	
	& 
	\textit{логин}, является первичным ключом
	& 
	да \\
	\cline{2-3}
	
	&
	\textit{захешированный пароль}
	&
	да \\
\end{longtable}

\textbf{Сервис бронирования} реализует следующие функции:
\begin{itemize}
	\item получение и отправка данных в формате JSON по протоколу HTTP;
		
	\item получение списка всех гостиниц, входящий в сеть Apartlux;
	
	\item получение информации о конкретной гостинице по её идентификатору;
	
	\item вычисление стоимости бронирования за указанный период в выбранной гостинице;
	
	\item получение всех бронирований, зарегистрированных на конкретного клиента;
	
	\item получение конкретного бронирования по его идентификатору;
	
	\item создание, редактирование и отзыв бронирования.
\end{itemize}
Соответствующая база данных содержит две сущности, описание которых приведено в таблице \ref{tbl:db_reservation}.
\begin{longtable}{| p{4cm} | p{8.3cm} | p{3.6cm} |}
	\caption{Состав сущностей}
	\label{tbl:db_reservation} \\
	\hline
	
	\textbf{Сущность} & \textbf{Поля} & \textbf{Обязательность} \\
	\hline
	\endfirsthead
	
	\hline
	\textbf{Сущность} & \textbf{Поля} & \textbf{Обязательность} \\
	\hline
	\endhead
	
	\hline
	\multicolumn{3}{c}{\textit{Продолжение на следующей странице}}
	\endfoot
	\hline
	\endlastfoot
	
	\multirow{7}{*}{Гостиница}
	& 
	\textit{идентификатор}, является первичным ключом
	& 
	да \\
	\cline{2-3}
	
	&
	\textit{идентификатор}, отвечающий стандартам Open Software Foundation
	&
	да \\
	\cline{2-3}
	
	&
	\textit{название}, не превышает 256 символов
	&
	да \\
	\cline{2-3}
	
	&
	\textit{страна}, не превышает 80 символов
	&
	да \\
	\cline{2-3}
	
	&
	\textit{город}, не превышает 80 символов
	&
	да \\
	\cline{2-3}
	
	&
	\textit{адрес}, не превышает 256 символов
	&
	да \\
	\cline{2-3}
	
	&
	\textit{количество звёзд}
	&
	нет \\
	\hline
	
	\multirow{7}{*}{Бронь}
	& 
	\textit{идентификатор}, является первичным ключом
	& 
	да \\
	\cline{2-3}
	
	&
	\textit{идентификатор}, отвечающий стандартам Open Software Foundation
	&
	да \\
	\cline{2-3}
	
	&
	\textit{логин клиента}
	&
	да \\
	\cline{2-3}
	
	&
	\textit{идентификатор оплаты}
	&
	да \\
	\cline{2-3}
	
	&
	\textit{идентификатор гостиницы}
	&
	да \\
	\cline{2-3}
	
	&
	\textit{статус оплаты}, PAID/CANCELED
	&
	да \\
	\cline{2-3}
	
	&
	\textit{дата начала брони}
	&
	да \\
	\cline{2-3}
	
	&
	\textit{дата окончания брони}
	&
	да \\
	\cline{2-3}
\end{longtable}

\textbf{Сервис оплаты} реализует функции:
\begin{itemize}
	\item получение и отправка данных в формате JSON по протоколу HTTP;
	
	\item предоставления информации об оплате по её идентификатору;
	
	\item проведения оплаты;
	
	\item получения статуса оплаты;
	
	\item отмены платежа.
\end{itemize}

Ассоциированная с этим сервисом база данных содержит сущность, детально представленная в таблице \ref{tbl:db_payment}.
\begin{longtable}{| p{4cm} | p{8.3cm} | p{3.6cm} |}
	\caption{Состав сущностей}
	\label{tbl:db_payment} \\
	\hline
	
	\textbf{Сущность} & \textbf{Поля} & \textbf{Обязательность} \\
	\hline
	\endfirsthead
	
	\hline
	\textbf{Сущность} & \textbf{Поля} & \textbf{Обязательность} \\
	\hline
	\endhead
	
	\hline
	\multicolumn{3}{c}{\textit{Продолжение на следующей странице}}
	\endfoot
	\hline
	\endlastfoot
	
	\multirow{5}{*}{Платёж}
	& 
	\textit{идентификатор}, является первичным ключом
	& 
	да \\
	\cline{2-3}
	
	&
	\textit{идентификатор}, отвечающий стандартам Open Software Foundation
	&
	да \\
	\cline{2-3}

	& 
	\textit{статус}, PAID/CANCELED
	& 
	да \\
	\cline{2-3}
	
	&
	\textit{цена}
	&
	да \\
\end{longtable}

\textbf{Сервис лояльности} должен реализовывать представленные такие функциональные возможности, как:
\begin{itemize}
	\item получение и отправка ответов на запросы в формате JSON по протоколу HTTP;
	
	\item получение величины скидки по конкретному пользователю;
	
	\item получение детальной информации о конкретном участнике программы лояльности по его логину;
	
	\item обновление числа заказов и статуса по программе лояльности (предусмотреть, как повышение, так и понижение в случае отмены бронирования);
	
	\item внесение изменений в размер скидки по конкретному пользователю.
\end{itemize}

Соответствующая сущность базы данных имеет поля, представленные в таблице \ref{tbl:db_loyalty}.
\begin{longtable}{| p{4cm} | p{8.3cm} | p{3.6cm} |}
	\caption{Состав сущностей}
	\label{tbl:db_loyalty} \\
	\hline
	
	\textbf{Сущность} & \textbf{Поля} & \textbf{Обязательность} \\
	\hline
	\endfirsthead
	
	\hline
	\textbf{Сущность} & \textbf{Поля} & \textbf{Обязательность} \\
	\hline
	\endhead
	
	\hline
	\multicolumn{3}{c}{\textit{Продолжение на следующей странице}}
	\endfoot
	\hline
	\endlastfoot
	
	\multirow{5}{*}{\shortstack[l]{Карта \\ лояльности}}
	& 
	\textit{идентификатор}, является первичным ключом
	& 
	да \\
	\cline{2-3}
	
	&
	\textit{логин клиента}
	&
	да \\
	\cline{2-3}
	
	& 
	\textit{количество оформленных ранее заказов}, по умолчанию 0
	& 
	да \\
	\cline{2-3}
	
	&
	\textit{статус}, BRONZE/SILVER/GOLD, по умолчанию BRONZE
	&
	да \\
	\cline{2-3}
	
	&
	\textit{скидка}, по умолчанию 10
	&
	да \\
\end{longtable}

\section*{Требования к составу и параметрам технических средств}
Все серверные приложения должны потреблять суммарно не более 2 Гбайт оперативной памяти и работать на сервере с процессором Intel(R) Core(TM) i7-10510U CPU 1.80GHz.

\section*{Требования к надёжности}
Система должна работать в соответствии  с  данным  техническим  заданием  без  рестарта.  Необходимо использовать <<зеркалируемые серверы>> для всех подсистем, которые будут держать нагрузку в случае сбоя до тех пор, пока основной сервер не восстановится.

\section*{Требования к документации}
Исполнитель должен подготовить и передать заказчику руководство:
\begin{itemize}
	\item для администратора Системы;
	
	\item авторизированного пользователя Системы;
	
	\item неавторизированного пользователя Системы;
	
	\item по развёртыванию Системы.
\end{itemize}

\pagebreak